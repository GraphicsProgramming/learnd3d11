
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn D3D11">
      
      
        <meta name="author" content="deccer">
      
      
        <link rel="canonical" href="https://graphicsprogramming.github.io/learnd3d11/1-introduction/1-1-getting-started/1-1-3-hello-triangle/">
      
      
        <link rel="prev" href="../1-1-2-hello-d3d11/">
      
      
        <link rel="next" href="../../1-2-debug/1-2-0-overview/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.43">
    
    
      
        <title>Hello Triangle - LearnD3D11</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hello-triangle" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="LearnD3D11" class="md-header__button md-logo" aria-label="LearnD3D11" data-md-component="logo">
      
  <img src="https://cdn.discordapp.com/attachments/908076591547052032/937089306009432084/unknown.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LearnD3D11
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hello Triangle
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="orange" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/graphicsprogramming/learnd3d11" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    graphicsprogramming/learnd3d11
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="LearnD3D11" class="md-nav__button md-logo" aria-label="LearnD3D11" data-md-component="logo">
      
  <img src="https://cdn.discordapp.com/attachments/908076591547052032/937089306009432084/unknown.png" alt="logo">

    </a>
    LearnD3D11
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/graphicsprogramming/learnd3d11" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    graphicsprogramming/learnd3d11
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-1-0-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-1-1-hello-window/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello Window
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-1-2-hello-d3d11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello D3D11
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Hello Triangle
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Hello Triangle
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      The Pipeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-shader" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex Shader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vertex Shader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainvshlsl" class="md-nav__link">
    <span class="md-ellipsis">
      Main.vs.hlsl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pixel-shader" class="md-nav__link">
    <span class="md-ellipsis">
      Pixel Shader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pixel Shader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainpshlsl" class="md-nav__link">
    <span class="md-ellipsis">
      Main.ps.hlsl
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-shaders" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling shaders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compiling shaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hellotrianglehpp" class="md-nav__link">
    <span class="md-ellipsis">
      HelloTriangle.hpp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hellotrianglecpp" class="md-nav__link">
    <span class="md-ellipsis">
      HelloTriangle.cpp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HelloTriangle.cpp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compileshader" class="md-nav__link">
    <span class="md-ellipsis">
      CompileShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createvertexshader" class="md-nav__link">
    <span class="md-ellipsis">
      CreateVertexShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createpixelshader" class="md-nav__link">
    <span class="md-ellipsis">
      CreatePixelShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-layouts" class="md-nav__link">
    <span class="md-ellipsis">
      Input Layouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex Buffers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drawing-our-triangle" class="md-nav__link">
    <span class="md-ellipsis">
      Drawing our triangle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Debugging
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-0-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-1-clear-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clear State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-2-debug-layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug Layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-3-naming-things/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Naming things
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-4-renderdoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RenderDoc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-2-debug/1-2-5-laptop-gpus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Laptop GPUs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Basics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-0-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-1-rasterizer-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rasterizer State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-2-texturing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Texturing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-3-setting-up-3d-rendering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up 3D Rendering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-4-3d-rendering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3D Rendering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-5-models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-3-basics/1-3-6-dear-imgui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dear ImGui
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Code
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Code
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../8-code/repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      The Pipeline
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-shader" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex Shader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Vertex Shader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainvshlsl" class="md-nav__link">
    <span class="md-ellipsis">
      Main.vs.hlsl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pixel-shader" class="md-nav__link">
    <span class="md-ellipsis">
      Pixel Shader
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pixel Shader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mainpshlsl" class="md-nav__link">
    <span class="md-ellipsis">
      Main.ps.hlsl
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-shaders" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling shaders
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compiling shaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hellotrianglehpp" class="md-nav__link">
    <span class="md-ellipsis">
      HelloTriangle.hpp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hellotrianglecpp" class="md-nav__link">
    <span class="md-ellipsis">
      HelloTriangle.cpp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HelloTriangle.cpp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compileshader" class="md-nav__link">
    <span class="md-ellipsis">
      CompileShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createvertexshader" class="md-nav__link">
    <span class="md-ellipsis">
      CreateVertexShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createpixelshader" class="md-nav__link">
    <span class="md-ellipsis">
      CreatePixelShader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-layouts" class="md-nav__link">
    <span class="md-ellipsis">
      Input Layouts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vertex-buffers" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex Buffers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#drawing-our-triangle" class="md-nav__link">
    <span class="md-ellipsis">
      Drawing our triangle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="hello-triangle">Hello Triangle<a class="headerlink" href="#hello-triangle" title="Permanent link">&para;</a></h1>
<p>In the last chapter we initialized core components of <code>D3D11</code> and DXGI such as 
the Device and the SwapChain, but simply clearing the Window with 
some color is pretty boring.</p>
<p>This time we will be drawing our first triangle with a nice froge-like color.</p>
<h2 id="the-pipeline">The Pipeline<a class="headerlink" href="#the-pipeline" title="Permanent link">&para;</a></h2>
<p>The fundamental part of all graphic APIs is the "Graphics Pipeline". Everything 
from a single triangle, textured frog or the whole Elden Ring map goes through 
this pipeline. It is a series of functions that either exist in hardware, can 
be configured or are fully programmable. It transforms everything we draw in 
3D space to the 2D space that is our monitor.</p>
<p>All the steps in the graphics pipeline go from top to bottom and are shown below.</p>
<p><img alt="" src="https://docs.microsoft.com/en-us/windows/win32/direct3d11/images/d3d11-pipeline-stages.jpg" /></p>
<p>As you can see, each stage in the pipeline takes in the previous stage's output 
as the input, the rectangle blocks are pipeline stages 
that are not programmable but are configurable, while
the rounded rectangle blocks are stages that are fully programmable. 
To draw most of the things throughout this series we will mostly need these stages: 
Input Assembler, Vertex Shader and the Pixel Shader, Output Merger.</p>
<p>The Vertex and Pixel shaders are fully programmable and we will write a very basic 
program for them.</p>
<p>The other two stages are not programmable but they are fairly easy to understand 
and configure:</p>
<ul>
<li>
<p>the <strong>Input Assembler</strong> is responsible for processing the vertices in an eventual 
vertex buffer into the primitive topology of our choice, which in our case is a form 
of triangles, and sending this processed output to be processed again - but this time 
by our Vertex Shader. </p>
</li>
<li>
<p>The <strong>Output Merger</strong> is responsible for combining the values written by the 
pixel shader, may that be depth, color or other things, into the one or more render 
targets that we provide to the OM, we only have one 
render target for now.</p>
</li>
</ul>
<h2 id="vertex-shader">Vertex Shader<a class="headerlink" href="#vertex-shader" title="Permanent link">&para;</a></h2>
<p>The <strong>Vertex Shader</strong> is the stage where our vertices are 
processed however we want</p>
<p>The vertices are <strong>usually</strong> read from a <strong>Vertex Buffer</strong> — <em>usually</em> 
since there are no
hard rules in programming — we can always be inventive to create or 
read data differently on the fly!
This all works since the vertex shader will be run however many times we tell 
it to run, which is specified in the first parameter of <code>ID3D11DeviceContext::Draw()</code> 
(more on this later), for instance if we call <code>Draw(3, 0)</code>, the vertex shader will 
run 3 times.</p>
<p>An example of unique methods to acquire vertex data is with how the 
vertex buffer can be omitted,
if we want to draw a full screen triangle by just hardcoding  vertices 
in our vertex shader — removing 
the need of a vertex buffer.</p>
<p>Since we only want to draw a triangle, we do not need to do much processing in our
vertex shader code, we can just provide the input vertices as the output.</p>
<p>Let's look at our basic vertex shader for this section:</p>
<h4 id="mainvshlsl">Main.vs.hlsl<a class="headerlink" href="#mainvshlsl" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="n">VSInput</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">position</span><span class="o">:</span><span class="w"> </span><span class="n">POSITION</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="n">COLOR0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="n">VSOutput</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float4</span><span class="w"> </span><span class="n">position</span><span class="o">:</span><span class="w"> </span><span class="nd">SV_Position</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="n">COLOR0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">VSOutput</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">VSInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">VSOutput</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">VSOutput</span><span class="p">)</span><span class="mo">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">output</span><span class="p">.</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">float4</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="n">output</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">.</span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>First off, we define 2 types, <code>VSInput</code> and <code>VSOutput</code> which represent the 
vertex shader's input and output.</p>
<p>There are two inputs, both of them are a float3. 
float3 is a type that holds 3 floating point numbers.</p>
<p>The first input is the position field (x y z as the 3
floats)
the second one is the color field (r g b as the 3
floats).</p>
<p>We will send both of these over to the output of this 
stage, onto the pixel shader.</p>
<p>Notice how all our fields have a colon and some identifier attached to them, 
these are "semantics". Semantics that are preceded by <code>SV</code> are called 
"system-value semantics" and their meaning and usage is defined by D3D11. 
<code>SV_Position</code> for example means that the field <code>position</code> will be used by 
D3D11 as the actual output of the vertex shader.</p>
<p>Everything else are "user defined semantics" and their naming is up to us. 
These are used to pass data between shader stages.</p>
<p>Then we have our <code>VSOutput</code>, which has our vertices in the first field <code>position</code> 
and our color in the second field <code>color</code>.</p>
<p>if the <code>SV_Position</code> values are tried to be given a position outside the range of 
[-1.0, 1.0] they are clipped and we will not see them on 
screen. Due to this we need
to create our own math to transform any coordinates we 
have to a normalized [-1.0, 1.0]
This is going to be explored later in more depth
under the name of Normalized Device Coordinates (NDC).</p>
<p>Finally, we have our main function, which in our case 
takes in a single parameter which is 
our input in the form of a <code>VSInput</code> struct, and returns 
our output in the form of a <code>VSOutput</code>.
 Since we do not do any processing, we simply make a new 
 instance of <code>VSOutput</code>,  initialize it all to 0 and 
 forward our input position and color to the output.</p>
<h3 id="pixel-shader">Pixel Shader<a class="headerlink" href="#pixel-shader" title="Permanent link">&para;</a></h3>
<p>The <strong>Pixel Shader</strong> is the stage (by default) where we set the pixels 
on our render target, it is invoked for each pixel that is 
covered by a triangle formed by previous shader(s)</p>
<p>We use this (Pixel Shader) stage generally to apply most 
of our shading techniques, from anything such as basic 
lighting, to textures, <em>and more</em>.</p>
<p>Since we did not specify any shader between the VS and the 
PS, our input here is the output of the VS</p>
<p>Let's look at our Pixel Shader now:</p>
<h4 id="mainpshlsl">Main.ps.hlsl<a class="headerlink" href="#mainpshlsl" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="n">PSInput</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float4</span><span class="w"> </span><span class="n">position</span><span class="o">:</span><span class="w"> </span><span class="nd">SV_Position</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="n">COLOR0</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span><span class="w"> </span><span class="n">PSOutput</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float4</span><span class="w"> </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="nd">SV_Target0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">PSOutput</span><span class="w"> </span><span class="n">Main</span><span class="p">(</span><span class="n">PSInput</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">PSOutput</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PSOutput</span><span class="p">)</span><span class="mo">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">output</span><span class="p">.</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">float4</span><span class="p">(</span><span class="n">input</span><span class="p">.</span><span class="n">color</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Here as well we have an input <code>PSInput</code>, and an output <code>PSOutput</code>.</p>
<p>Since we have not setup any other shaders in between the VS and the PS, the VS's 
output is the PS's input, the naming might be a bit confusing but that's the 
gist of it, PSInput should match the VSOutput in vertex shader, this isn't 
entirely required but not doing so is only advisable if you really know what 
you are doing.</p>
<p>Next we have our output, <code>D3D11</code> gives us the possibility to write to multiple 
render targets, but we are not doing that, so we will just be writing a <code>float4</code> 
as our output, which is an RGBA color.</p>
<p>Notice how we have another semantic string attached to the <code>color</code> field, 
this semantic string specifies which render target we want to be writing to, 
the <code>0</code> after <code>SV_Target</code> is the index of our render target, in our case, 
we have only one, so we write <code>SV_Target0</code> or <code>SV_Target</code>.</p>
<p><code>D3D11</code> lets us write up to 8 render targets simultaneously from the same pixel 
shader, those come in handy when implementing more advanced shading techniques.</p>
<p>And lastly, our <code>Main</code> function. 
Following the same pattern as in the VS we have already:
 one input (<code>VSInput</code>) and output parameter (<code>PSOutput</code>).</p>
<p>we initialize <code>PSOutput</code> and set everything to 0 to then 
 write the color we got from the input to our output.</p>
<h2 id="compiling-shaders">Compiling shaders<a class="headerlink" href="#compiling-shaders" title="Permanent link">&para;</a></h2>
<p>Now that we wrote our shader code and saved it somewhere, we have to feed this </p>
<p>to the GPU, to do that we will use our D3DCompiler to compile!</p>
<p>First, we will declare some functions that will help us compile our shaders more quickly.</p>
<h3 id="hellotrianglehpp">HelloTriangle.hpp<a class="headerlink" href="#hellotrianglehpp" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">CompileShader</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">entryPoint</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">profile</span><span class="p">,</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">shaderBlob</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span><span class="w"> </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11VertexShader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CreateVertexShader</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">vertexShaderBlob</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="p">[[</span><span class="n">nodiscard</span><span class="p">]]</span><span class="w"> </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11PixelShader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">CreatePixelShader</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
</code></pre></div>
<p>In order, we have:</p>
<p><code>CompileShader</code>: This function is the core for compiling shaders, it requires 3 
input parameters:</p>
<ul>
<li><code>fileName</code>: is the path of the shader file we want to compile.</li>
<li><code>entryPoint</code>: is the name of the function where the shader begins execution.</li>
<li><code>profile</code>: which is basically the version of HLSL we want to use, the higher the 
             profile number, the more features there are.</li>
</ul>
<p>And one output parameter:</p>
<ul>
<li><code>shaderBlob</code>: the blob were our compiled code will be stored. A blob is just 
  a fancy buffer which <code>D3D11</code> can use for specific purposes.</li>
</ul>
<p>Then:
<code>CreateVertexShader</code>: This function helps us create specifically a 
<code>ID3D11VertexShader</code>, it only requires the shader path and a 
<a href="https://docs.microsoft.com/en-us/previous-versions/windows/desktop/legacy/ff728743(v=vs.85)"><code>ID3DBlob</code></a>.</p>
<p>We need to pass a blob ourselves because we will need the VS's blob later.</p>
<p><code>CreatePixelShader</code>: It does the same thing that <code>CreateVertexShader</code> 
does, except we do not need to pass a <code>ID3DBlob</code> here.</p>
<p>Now that we know how our new members look, we will see how we implemented them.</p>
<h3 id="hellotrianglecpp">HelloTriangle.cpp<a class="headerlink" href="#hellotrianglecpp" title="Permanent link">&para;</a></h3>
<p>First things first, let's see <code>CompileShader</code>:</p>
<h4 id="compileshader">CompileShader<a class="headerlink" href="#compileshader" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span><span class="w"> </span><span class="nf">HelloTriangleApplication::CompileShader</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">entryPoint</span><span class="p">,</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">profile</span><span class="p">,</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">shaderBlob</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">constexpr</span><span class="w"> </span><span class="n">UINT</span><span class="w"> </span><span class="n">compileFlags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D3DCOMPILE_ENABLE_STRICTNESS</span><span class="p">;</span>

<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tempShaderBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;</span><span class="w"> </span><span class="n">errorBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">D3DCompileFromFile</span><span class="p">(</span>
<span class="w">        </span><span class="n">fileName</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span>
<span class="w">        </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">        </span><span class="n">D3D_COMPILE_STANDARD_FILE_INCLUDE</span><span class="p">,</span>
<span class="w">        </span><span class="n">entryPoint</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span>
<span class="w">        </span><span class="n">profile</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span>
<span class="w">        </span><span class="n">compileFlags</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">tempShaderBlob</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">errorBlob</span><span class="p">)))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: Failed to read shader from file</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">errorBlob</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: With message: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span>
<span class="w">            </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">errorBlob</span><span class="o">-&gt;</span><span class="n">GetBufferPointer</span><span class="p">())</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">shaderBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">tempShaderBlob</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>We start by creating two <code>ID3DBlob</code>s, we will need a temporary blob, where we will
load our shader file and an error blob, which will contain our error messages, if any.</p>
<p>Then we call for <a href="https://docs.microsoft.com/en-us/windows/win32/api/d3dcompiler/nf-d3dcompiler-d3dcompilefromfile"><code>D3DCompileFromFile</code></a>, 
it requires quite a lot of parameters so let's go over them one by one in order:</p>
<ul>
<li><code>pFileName</code>: a UTF-8 string containing the file name of the shader we want to compile.</li>
<li><code>pDefines</code>: optional, basically an array of macros that we want to define.</li>
<li><code>pInclude</code>: optional, a pointer to a <code>ID3DInclude</code> object, it is useful to 
   specify how to handle <code>#include</code> directives in shaders. It is common to 
   just use <code>D3D_COMPILE_STANDARD_FILE_INCLUDE</code>, which is the default handler.</li>
<li><code>pEntrypoint</code>: a string containing the name of the main function in the shader - 
Defaults to <code>main</code> if NULL</li>
<li><code>pTarget</code>: a string containing the Shader Model version to use for this shader.</li>
<li><code>Flags1</code>: the flags that changes how to compile our shaders, for example we pass
  <code>D3DCOMPILE_ENABLE_STRICTNESS</code> which makes the compiler stricter in judging our
   code and disables legacy syntax support.</li>
<li><code>Flags2</code>: ignored, set to 0.</li>
<li><code>ppCode</code>: output, a pointer to a <code>ID3DBlob*</code>, this is where our compiled code will
   be stored.</li>
<li><code>ppErrorMsgs</code>: optional, output, a pointer to a <code>ID3DBlob*</code>, this is where the D3D
   compiler will store our errors, <code>nullptr</code> if everything went fine.</li>
</ul>
<p>Then we do our usual checking, if there were errors, leave the output blob 
as is and print the error message contained in the blob. Otherwise, move 
the blob to our output parameter.</p>
<p>Now let's see <code>CreateVertexShader</code> and <code>CreatePixelShader</code>:</p>
<h4 id="createvertexshader">CreateVertexShader<a class="headerlink" href="#createvertexshader" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">HelloTriangleApplication</span><span class="o">::</span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11VertexShader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">HelloTriangleApplication</span><span class="o">::</span><span class="n">CreateVertexShader</span><span class="p">(</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">,</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">vertexShaderBlob</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">CompileShader</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;vs_5_0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">vertexShaderBlob</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11VertexShader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertexShader</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">_device</span><span class="o">-&gt;</span><span class="n">CreateVertexShader</span><span class="p">(</span>
<span class="w">        </span><span class="n">vertexShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferPointer</span><span class="p">(),</span>
<span class="w">        </span><span class="n">vertexShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferSize</span><span class="p">(),</span>
<span class="w">        </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">vertexShader</span><span class="p">)))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: Failed to compile vertex shader</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">vertexShader</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>As you can see here we are using our helper function <code>CompileShader</code> to avoid
repeating ourselves, we are specifying <code>"Main"</code> as the entry point of our 
vertex shader and <code>"vs_5_0"</code> as the Shader Model, which means 
"Vertex Shader Model 5.0".</p>
<p>After we get our blob successfully, we can create a vertex shader out of it with
<code>ID3D11Device::CreateVertexShader</code>, it takes a pointer to a buffer with the compiled 
code and its size as the input. The resulting vertex shader is the last parameter 
which is our output.</p>
<p>And finally</p>
<h4 id="createpixelshader">CreatePixelShader<a class="headerlink" href="#createpixelshader" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">HelloTriangleApplication</span><span class="o">::</span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11PixelShader</span><span class="o">&gt;</span><span class="w"> </span>
<span class="n">HelloTriangleApplication</span><span class="o">::</span><span class="n">CreatePixelShader</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">wstring</span><span class="o">&amp;</span><span class="w"> </span><span class="n">fileName</span><span class="p">)</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pixelShaderBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">CompileShader</span><span class="p">(</span><span class="n">fileName</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Main&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ps_5_0&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">pixelShaderBlob</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3D11PixelShader</span><span class="o">&gt;</span><span class="w"> </span><span class="n">pixelShader</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">_device</span><span class="o">-&gt;</span><span class="n">CreatePixelShader</span><span class="p">(</span>
<span class="w">        </span><span class="n">pixelShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferPointer</span><span class="p">(),</span>
<span class="w">        </span><span class="n">pixelShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferSize</span><span class="p">(),</span>
<span class="w">        </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">pixelShader</span><span class="p">)))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: Failed to compile pixel shader</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">pixelShader</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Pretty much the same thing as <code>CreateVertexShader</code>, the only thing that changes is
the <code>profile</code> parameter from <code>"vs_5_0"</code> to <code>"ps_5_0"</code>, since we are not compiling a 
vertex shader now, we have to change this to the "Pixel Shader Model 5.0".</p>
<p>After all of this, we can now call these functions, in 
<code>HelloTriangleApplication::Initialize()</code> you should now add:</p>
<h4 id="initialize">Initialize<a class="headerlink" href="#initialize" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="n">ComPtr</span><span class="o">&lt;</span><span class="n">ID3DBlob</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertexShaderBlob</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="n">_vertexShader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreateVertexShader</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;Assets/Shaders/Main.vs.hlsl&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">vertexShaderBlob</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_vertexShader</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">_pixelShader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CreatePixelShader</span><span class="p">(</span><span class="sa">L</span><span class="s">&quot;Assets/Shaders/Main.ps.hlsl&quot;</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_pixelShader</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>We still have a <code>vertexShaderBlob</code> now, it will be useful to us later, in creating an 
input layout.</p>
<h3 id="input-layouts">Input Layouts<a class="headerlink" href="#input-layouts" title="Permanent link">&para;</a></h3>
<p>We have successfully compiled our shaders now, we need one last thing, 
an <strong>Input Layout</strong>. An input layout, is basically the format we want 
to lay our vertices in our buffers.</p>
<p>Since all our vertices we want to give to the GPU must be tightly packed in the 
same buffer, the Input Assembler needs a way to make sense of our data, this is 
exactly what an input layout is for - it tells the GPU exactly how the memory in 
the buffer will be organized, and how it should be mapped to our expected vertex 
shader, vertex layout (<code>VSInput</code> in our case)</p>
<p>Let's see what input we expect in the vertex shader again:</p>
<div class="highlight"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="n">VSInput</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">position</span><span class="o">:</span><span class="w"> </span><span class="n">POSITION</span><span class="p">;</span>
<span class="w">    </span><span class="kt">float3</span><span class="w"> </span><span class="n">color</span><span class="o">:</span><span class="w"> </span><span class="n">COLOR0</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>The vertex shader expects per vertex: two vectors of 3 (4 byte) components. </p>
<p>We should then create an input layout exactly with this format:</p>
<p>First of all, creating a <code>struct</code> in our C++ source with the same field layout 
as our <code>VSInput</code> will make our life easier when imagining how 1 vertex will fit 
on the GPU one after each other.</p>
<p>To do this we will use <code>DirectXMath</code> which has types that map perfectly to HLSL, 
both of our inputs are <code>float3</code> in HLSL, which means that this translates 
to <code>DirectX::XMFLOAT3</code> </p>
<p><em><code>DirectX::XMFLOAT3</code> wraps 3 floats like an array, it is a class designed to work 
with <code>DirectXMath</code></em></p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DirectX</span><span class="o">::</span><span class="n">XMFLOAT3</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DirectX</span><span class="o">::</span><span class="n">XMFLOAT3</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">VertexPositionColor</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Position</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>
<span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<p>The type aliases (<code>using Position</code> and <code>using Color</code>) help us make this code more 
readable to easily guess what is what type. The first field is our position vector 
and the second field is our color vector — notice it is exactly like our <code>VSInput</code>.</p>
<p>Now we can create our <strong>Input Layout Description</strong> using 
an array of <code>D3D11_INPUT_ELEMENT_DESC</code>. </p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="n">D3D11_INPUT_ELEMENT_DESC</span><span class="w"> </span><span class="n">vertexInputLayoutInfo</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;POSITION&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="n">DXGI_FORMAT</span><span class="o">::</span><span class="n">DXGI_FORMAT_R32G32B32_FLOAT</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="n">offsetof</span><span class="p">(</span><span class="n">VertexPositionColor</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">),</span>
<span class="w">        </span><span class="n">D3D11_INPUT_CLASSIFICATION</span><span class="o">::</span><span class="n">D3D11_INPUT_PER_VERTEX_DATA</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="s">&quot;COLOR&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="n">DXGI_FORMAT</span><span class="o">::</span><span class="n">DXGI_FORMAT_R32G32B32_FLOAT</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span><span class="p">,</span>
<span class="w">        </span><span class="n">offsetof</span><span class="p">(</span><span class="n">VertexPositionColor</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">),</span>
<span class="w">        </span><span class="n">D3D11_INPUT_CLASSIFICATION</span><span class="o">::</span><span class="n">D3D11_INPUT_PER_VERTEX_DATA</span><span class="p">,</span>
<span class="w">        </span><span class="mi">0</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>
<p><strong>Now let's make sense of why we have the following layout:</strong>
(we will refer to 1 element of D3D11_INPUT_ELEMENT_DESC as a field)</p>
<div class="highlight"><pre><span></span><code>{
    `SemanticName`,
    `SemanticIndex`,
    `Format`,
    `InputSlot`,
    `AlignedByteOffset`,
    `InputSlotClass`,
    `InstanceDataStepRate`
},
</code></pre></div>
<ul>
<li>
<p><code>SemanticName</code>: let's us refer to a particular field name (the string) after the 
colon in HLSL (recall <code>POSITION</code> inside <code>float3 position: POSITION</code>)</p>
</li>
<li>
<p><code>SemanticIndex</code>: the index of each semantic, <code>POSITION</code> is equivalent to <code>POSITION0</code>,
where the number at the end is our semantic index, so we will just pass in 0. </p>
<p><em><code>POSITION1</code> in HLSL would have a semantic index of 1, etc.</em></p>
</li>
<li>
<p><code>Format</code>: the format of this field, basically how many components there are and 
what type they are, a <code>float3</code> in HLSL is a vector of 3 floats, each float is 4 
bytes wide (or 32 bits), so the format here is <code>DXGI_FORMAT_R32G32B32_FLOAT</code>.
DXGI_FORMAT chose R32 G32 B32 as an arbitrary component 
name, this has nothing to do with colors, we can store 
positions here since the type is <code>FLOAT</code></p>
</li>
<li>
<p><code>InputSlot</code>: we will see about this later.</p>
</li>
<li><code>AlignedByteOffset</code>: the offset of this field, in bytes</li>
<li><code>InputSlotClass</code>: The rate of input is either per-vertex or per-instance, we do not 
use instances right now since we are only drawing a triangle
so we will set this to PER_VERTEX, and explain PER_INSTANCE in later lessons.</li>
<li><code>InstanceDataStepRate</code>: this will be explained with PER_INSTANCE in later lessons,
 so for now this value is 0</li>
</ul>
<p>Each element being sent to the GPU needs to be described on how they are laid out, 
therefore we have D3D11_INPUT_ELEMENT_DESC vertexInputLayoutInfo[] to describe the data layout.</p>
<p>You can think of each element in this array as describing one element in <code>VSInput</code> </p>
<ul>
<li><code>POSITION</code> is the first element (offset of 0).
<code>POSITION</code> is also a float3 (4+4+4 = 12 bytes).
Therefore the GPU expects the first 12 bytes of every vertex to be a float3 filled 
with <code>POSITION</code> data.</li>
<li><code>COLOR</code> is after <code>POSITION</code>, meaning COLOR has an offset of 12 bytes.
because <code>COLOR</code> is also a float3, it is also 12 bytes.</li>
</ul>
<p>Therefore the GPU expects after the <code>POSITION</code> data, 12 bytes of <code>float3</code> <code>COLOR</code> data.</p>
<p>Hopefully it makes a bit more sense now, all we have to do is create the input layout 
using this data:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">_device</span><span class="o">-&gt;</span><span class="n">CreateInputLayout</span><span class="p">(</span>
<span class="w">    </span><span class="n">vertexInputLayoutInfo</span><span class="p">,</span>
<span class="w">    </span><span class="n">_countof</span><span class="p">(</span><span class="n">vertexInputLayoutInfo</span><span class="p">),</span>
<span class="w">    </span><span class="n">vertexShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferPointer</span><span class="p">(),</span>
<span class="w">    </span><span class="n">vertexShaderBlob</span><span class="o">-&gt;</span><span class="n">GetBufferSize</span><span class="p">(),</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">_vertexLayout</span><span class="p">)))</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: Failed to create default vertex input layout</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>As usual, we follow the same pattern, we pass in our <code>vertexInputLayoutInfo</code> that we 
just created and its size, we also need to pass our vertex blob pointer and size, and 
finally our output parameter which is our input layout.</p>
<p>Now all we have to do is create a vertex buffer (do not worry it's really easy) and 
issue our first <code>Draw</code> command!</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>Image showing stride and offset?</p>
</div>
<h2 id="vertex-buffers">Vertex Buffers<a class="headerlink" href="#vertex-buffers" title="Permanent link">&para;</a></h2>
<p>Vertex Buffers might seem hard at first, but they're really nothing more than a 
buffer that resides in our device's memory, which means really fast access. This 
buffer will be then bound and read by the vertex shader.</p>
<p>Creating a vertex buffer is also really easy, first we have to make some data to put 
in our buffer, since we want to draw a triangle, we will be creating 3 vertices using 
our <code>VertexPositionColor</code> struct.</p>
<div class="highlight"><pre><span></span><code><span class="k">constexpr</span><span class="w"> </span><span class="n">VertexPositionColor</span><span class="w"> </span><span class="n">vertices</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span>
<span class="p">{</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="n">Position</span><span class="p">{</span><span class="w">  </span><span class="mf">0.0f</span><span class="p">,</span><span class="w">  </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">Color</span><span class="p">{</span><span class="w"> </span><span class="mf">0.25f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.39f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.19f</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="n">Position</span><span class="p">{</span><span class="w">  </span><span class="mf">0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">Color</span><span class="p">{</span><span class="w"> </span><span class="mf">0.44f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.75f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.35f</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="n">Position</span><span class="p">{</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.5f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="n">Color</span><span class="p">{</span><span class="w"> </span><span class="mf">0.38f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.55f</span><span class="p">,</span><span class="w"> </span><span class="mf">0.20f</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="p">};</span>
</code></pre></div>
<p>Remember, the position coordinates we have to give to the vertex shader 
must be in range [-1.0, 1.0] by the time the vertex shader 
stage ends, otherwise we will not be able to see that 
vertex - because of this we supply vertices as [-1.0, 1.0]. </p>
<p>We are storing coordinates that form our triangle 
here: a Position and Color component per vertex</p>
<p>If you want you can try to visualize the triangle, take a piece of paper, draw a 
<strong>Cartesian Plane</strong>, draw 3 points and connect the dots with these coordinates.</p>
<p>Now that we have the data, let's store this on our vertex buffer:</p>
<div class="highlight"><pre><span></span><code><span class="n">D3D11_BUFFER_DESC</span><span class="w"> </span><span class="n">bufferInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="n">bufferInfo</span><span class="p">.</span><span class="n">ByteWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">vertices</span><span class="p">);</span>
<span class="n">bufferInfo</span><span class="p">.</span><span class="n">Usage</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D3D11_USAGE</span><span class="o">::</span><span class="n">D3D11_USAGE_IMMUTABLE</span><span class="p">;</span>
<span class="n">bufferInfo</span><span class="p">.</span><span class="n">BindFlags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">D3D11_BIND_FLAG</span><span class="o">::</span><span class="n">D3D11_BIND_VERTEX_BUFFER</span><span class="p">;</span>

<span class="n">D3D11_SUBRESOURCE_DATA</span><span class="w"> </span><span class="n">resourceData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<span class="n">resourceData</span><span class="p">.</span><span class="n">pSysMem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vertices</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FAILED</span><span class="p">(</span><span class="n">_device</span><span class="o">-&gt;</span><span class="n">CreateBuffer</span><span class="p">(</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">bufferInfo</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">resourceData</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">_triangleVertices</span><span class="p">)))</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;D3D11: Failed to create triangle vertex buffer</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>We begin by filling a <code>bufferInfo</code> descriptor for our buffer, we specify how many 
bytes we want, since this buffer will never change, for the <code>Usage</code> we specify: 
<code>D3D11_USAGE_IMMUTABLE</code> (the buffer is unmodifiable), this 
lets <code>D3D11</code> put this data as close as possible to the 
GPU, finally we specify how we want to use this buffer, we want this to be a vertex 
buffer, so for the <code>BindFlags</code> we give: <code>D3D11_BIND_VERTEX_BUFFER</code>.</p>
<p>And finally we create a <code>resourceData</code>, and populate the only field we care about: 
<code>pSysMem</code>, which is a pointer to our vertices which are currently in system RAM.</p>
<p>Then we issue the creation of the buffer using <code>CreateBuffer</code>, using the information 
we collected until now.</p>
<h2 id="drawing-our-triangle">Drawing our triangle<a class="headerlink" href="#drawing-our-triangle" title="Permanent link">&para;</a></h2>
<p>Now, we have reached the moment of truth, in our <code>Render</code> function we will add a few 
things:</p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetInputLayout</span><span class="p">(</span><span class="n">_vertexLayout</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
</code></pre></div>
<p>This sets the input layout we want to use.</p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetVertexBuffers</span><span class="p">(</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">_triangleVertices</span><span class="p">.</span><span class="n">GetAddressOf</span><span class="p">(),</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">vertexStride</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">vertexOffset</span><span class="p">);</span>
</code></pre></div>
<p>Then we go ahead and bind our vertex buffer.</p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetPrimitiveTopology</span><span class="p">(</span><span class="n">D3D11_PRIMITIVE_TOPOLOGY</span><span class="o">::</span><span class="n">D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST</span><span class="p">);</span>
</code></pre></div>
<p>This sets how the Input Assembler should interpret the vertex data, since we want to 
draw triangles, <code>D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST</code> is the right flag for us.</p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">VSSetShader</span><span class="p">(</span>
<span class="w">    </span><span class="n">_vertexShader</span><span class="p">.</span><span class="n">Get</span><span class="p">(),</span>
<span class="w">    </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">PSSetShader</span><span class="p">(</span>
<span class="w">    </span><span class="n">_pixelShader</span><span class="p">.</span><span class="n">Get</span><span class="p">(),</span>
<span class="w">    </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>Setting the vertex and pixel shader here. I suggest to put <code>PSSetShader</code> after 
<code>RSSetViewports</code>, since it will maintain the pipeline order, it doesn't have any 
performance or correctness implications, it will just help you remember better which 
stage comes after which.</p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">Draw</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>And finally, tell the GPU to draw 3 vertices, this will invoke the vertex shader 3 
times, and it will successfully process the 3 vertices we put in our vertex buffer.</p>
<p>Finally, let's review all the commands we issue in <code>Render</code></p>
<div class="highlight"><pre><span></span><code><span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetInputLayout</span><span class="p">(</span><span class="n">_vertexLayout</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetVertexBuffers</span><span class="p">(</span>
<span class="w">    </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">_triangleVertices</span><span class="p">.</span><span class="n">GetAddressOf</span><span class="p">(),</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">vertexStride</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">vertexOffset</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">IASetPrimitiveTopology</span><span class="p">(</span><span class="n">D3D11_PRIMITIVE_TOPOLOGY</span><span class="o">::</span><span class="n">D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">VSSetShader</span><span class="p">(</span>
<span class="w">    </span><span class="n">_vertexShader</span><span class="p">.</span><span class="n">Get</span><span class="p">(),</span>
<span class="w">    </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">RSSetViewports</span><span class="p">(</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="o">&amp;</span><span class="n">viewport</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">PSSetShader</span><span class="p">(</span>
<span class="w">    </span><span class="n">_pixelShader</span><span class="p">.</span><span class="n">Get</span><span class="p">(),</span>
<span class="w">    </span><span class="k">nullptr</span><span class="p">,</span>
<span class="w">    </span><span class="mi">0</span><span class="p">);</span>
<span class="n">_deviceContext</span><span class="o">-&gt;</span><span class="n">OMSetRenderTargets</span><span class="p">(</span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="n">_renderTarget</span><span class="p">.</span><span class="n">GetAddressOf</span><span class="p">(),</span>
<span class="w">    </span><span class="k">nullptr</span><span class="p">);</span>
</code></pre></div>
<p>As you can see, we go through the pipeline in an orderly fashion, and although we 
do not use all the stages, we can see the top-to-bottom execution of the stages, IA </p>
<p>(Input Assembler) -&gt; VS (Vertex Shader) -&gt; RS (Rasterizer Stage) -&gt; PS (Pixel Shader) 
-&gt; OM (Output Merger).</p>
<p>You should now be able to run this and see your first triangle!</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>Provide picture of window with triangle</p>
</div>
<p><a href="https://github.com/GraphicsProgramming/learnd3d11/tree/main/src/Cpp/1-getting-started/1-1-3-HelloTriangle">Project on GitHub</a></p>
<p><a href="../../1-2-debug/1-2-0-overview/">Next chapter</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2022 Graphics Programming
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/graphicsprogramming/learnd3d11" target="_blank" rel="noopener" title="Graphics Programming on Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://discord.gg/6mgNGk7" target="_blank" rel="noopener" title="Graphics Programming on discord" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["tabs", "instant", "navigation.sections"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>